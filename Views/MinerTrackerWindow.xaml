<Window x:Class="BlockchainNetworkAnalyzer.Views.MinerTrackerWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:materialDesign="http://materialdesigninxaml.net/winfx/xaml/themes"
        xmlns:iconPacks="http://metro.mahapps.com/winfx/xaml/iconpacks"
        Title="Miner Tracker - Real-time Detection &amp; Guidance" 
        Height="800" Width="1200"
        WindowStartupLocation="CenterOwner">
    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <!-- Header -->
        <materialDesign:ColorZone Grid.Row="0" 
                                  Padding="15" 
                                  materialDesign:ColorZoneAssist.Mode="PrimaryMid">
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="Auto"/>
                </Grid.ColumnDefinitions>

                <StackPanel Grid.Column="0" Orientation="Horizontal">
                    <iconPacks:PackIconMaterial Kind="Radar" 
                                               Foreground="White" 
                                               Width="32" 
                                               Height="32" 
                                               VerticalAlignment="Center" 
                                               Margin="0,0,15,0"/>
                    <TextBlock Text="Miner Tracker" 
                              Foreground="White" 
                              FontSize="24" 
                              FontWeight="Bold" 
                              VerticalAlignment="Center"/>
                </StackPanel>

                <StackPanel Grid.Column="1" Orientation="Horizontal">
                    <Button x:Name="StartDetectionBtn" 
                           Content="Start Detection" 
                           Click="StartDetectionBtn_Click"
                           Margin="5,0"
                           Style="{StaticResource MaterialDesignRaisedButton}"/>
                    <Button x:Name="StopDetectionBtn" 
                           Content="Stop" 
                           Click="StopDetectionBtn_Click"
                           Margin="5,0"
                           IsEnabled="False"
                           Style="{StaticResource MaterialDesignOutlinedButton}"/>
                </StackPanel>
            </Grid>
        </materialDesign:ColorZone>

        <!-- Main Content -->
        <Grid Grid.Row="1">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="2*"/>
                <ColumnDefinition Width="*"/>
            </Grid.ColumnDefinitions>

            <!-- Direction Display -->
            <materialDesign:Card Grid.Column="0" 
                                Margin="10" 
                                Padding="20">
                <Grid>
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="*"/>
                        <RowDefinition Height="Auto"/>
                    </Grid.RowDefinitions>

                    <TextBlock Grid.Row="0" 
                              Text="Direction Indicator" 
                              FontSize="18" 
                              FontWeight="Bold" 
                              Margin="0,0,0,20"/>

                    <!-- Compass/Radar Display -->
                    <Grid Grid.Row="1" 
                         x:Name="CompassGrid"
                         Background="Black"
                         Margin="20">
                        <Canvas>
                            <!-- Compass Circle -->
                            <Ellipse Canvas.Left="50" 
                                   Canvas.Top="50" 
                                   Width="300" 
                                   Height="300" 
                                   Stroke="White" 
                                   StrokeThickness="2" 
                                   Fill="Transparent"/>
                            
                            <!-- Direction Arrow -->
                            <Line x:Name="DirectionArrow"
                                 X1="200" Y1="200"
                                 X2="200" Y2="100"
                                 Stroke="LimeGreen"
                                 StrokeThickness="6"
                                 StrokeEndLineCap="Round"
                                 Opacity="0.8"/>
                            
                            <!-- Distance Text -->
                            <TextBlock x:Name="DistanceText"
                                     Canvas.Left="180"
                                     Canvas.Top="350"
                                     Text="Distance: -- m"
                                     Foreground="LimeGreen"
                                     FontSize="20"
                                     FontWeight="Bold"/>
                            
                            <!-- Bearing Text -->
                            <TextBlock x:Name="BearingText"
                                     Canvas.Left="180"
                                     Canvas.Top="380"
                                     Text="Bearing: --Â°"
                                     Foreground="White"
                                     FontSize="16"/>
                        </Canvas>
                    </Grid>

                    <!-- Signal Strength Indicators -->
                    <StackPanel Grid.Row="2" 
                               Orientation="Horizontal" 
                               HorizontalAlignment="Center"
                               Margin="0,20,0,0">
                        <materialDesign:Card Margin="5" Padding="10">
                            <StackPanel>
                                <TextBlock Text="Signal Strength" FontSize="12" Opacity="0.7"/>
                                <ProgressBar x:Name="SignalStrengthBar" 
                                           Width="150" 
                                           Height="20" 
                                           Minimum="0" 
                                           Maximum="100" 
                                           Value="0"/>
                                <TextBlock x:Name="SignalStrengthText" 
                                          Text="0%" 
                                          HorizontalAlignment="Center" 
                                          FontSize="10"/>
                            </StackPanel>
                        </materialDesign:Card>

                        <materialDesign:Card Margin="5" Padding="10">
                            <StackPanel>
                                <TextBlock Text="Confidence" FontSize="12" Opacity="0.7"/>
                                <ProgressBar x:Name="ConfidenceBar" 
                                           Width="150" 
                                           Height="20" 
                                           Minimum="0" 
                                           Maximum="100" 
                                           Value="0"
                                           Foreground="#4CAF50"/>
                                <TextBlock x:Name="ConfidenceText" 
                                          Text="0%" 
                                          HorizontalAlignment="Center" 
                                          FontSize="10"/>
                            </StackPanel>
                        </materialDesign:Card>
                    </StackPanel>
                </Grid>
            </materialDesign:Card>

            <!-- Side Panel -->
            <materialDesign:Card Grid.Column="1" 
                                Margin="10" 
                                Padding="15">
                <ScrollViewer VerticalScrollBarVisibility="Auto">
                    <StackPanel>
                        <!-- Detection Controls -->
                        <TextBlock Text="Detection Controls" 
                                  FontSize="16" 
                                  FontWeight="Bold" 
                                  Margin="0,0,0,15"/>

                        <CheckBox x:Name="EnableEMDetectionCheck" 
                                 Content="Electromagnetic Detection" 
                                 IsChecked="True"
                                 Margin="0,0,0,10"/>
                        <CheckBox x:Name="EnableAcousticDetectionCheck" 
                                 Content="Acoustic Detection" 
                                 IsChecked="True"
                                 Margin="0,0,0,10"/>
                        <CheckBox x:Name="EnableAudioGuidanceCheck" 
                                 Content="Audio Guidance" 
                                 IsChecked="True"
                                 Margin="0,0,0,10"/>

                        <Separator Margin="0,10"/>

                        <!-- Detection Settings -->
                        <TextBlock Text="Settings" 
                                  FontSize="14" 
                                  FontWeight="SemiBold" 
                                  Margin="0,0,0,10"/>

                        <TextBlock Text="Scan Duration (seconds)" 
                                  FontSize="12" 
                                  Margin="0,0,0,5"/>
                        <Slider x:Name="ScanDurationSlider" 
                               Minimum="10" 
                               Maximum="300" 
                               Value="60" 
                               TickFrequency="10" 
                               IsSnapToTickEnabled="True"
                               Margin="0,0,0,15"/>

                        <TextBlock x:Name="ScanDurationText" 
                                  Text="Duration: 60s" 
                                  FontSize="11" 
                                  Opacity="0.7" 
                                  Margin="0,0,0,15"/>

                        <Separator Margin="0,10"/>

                        <!-- Detected Signals -->
                        <TextBlock Text="Detected Signals" 
                                  FontSize="14" 
                                  FontWeight="SemiBold" 
                                  Margin="0,0,0,10"/>

                        <ListBox x:Name="SignalsListBox" 
                                Height="200"
                                Margin="0,0,0,15">
                            <ListBox.ItemTemplate>
                                <DataTemplate>
                                    <StackPanel Margin="5">
                                        <TextBlock Text="{Binding MinerType}" 
                                                  FontWeight="Bold"/>
                                        <TextBlock Text="{Binding Frequency, StringFormat='Freq: {0:F0} Hz'}" 
                                                  FontSize="11"/>
                                        <TextBlock Text="{Binding EstimatedDistance, StringFormat='Distance: {0:F1} m'}" 
                                                  FontSize="11"/>
                                        <TextBlock Text="{Binding Confidence, StringFormat='Confidence: {0:P0}'}" 
                                                  FontSize="10" 
                                                  Opacity="0.7"/>
                                    </StackPanel>
                                </DataTemplate>
                            </ListBox.ItemTemplate>
                        </ListBox>

                        <!-- Status -->
                        <materialDesign:Card Background="#F5F5F5" Padding="10">
                            <StackPanel>
                                <TextBlock Text="Status" 
                                          FontSize="12" 
                                          FontWeight="Bold" 
                                          Margin="0,0,0,5"/>
                                <TextBlock x:Name="StatusText" 
                                          Text="Ready" 
                                          FontSize="11"/>
                                <TextBlock x:Name="SignalsCountText" 
                                          Text="Signals: 0" 
                                          FontSize="11" 
                                          Margin="0,5,0,0"/>
                            </StackPanel>
                        </materialDesign:Card>
                    </StackPanel>
                </ScrollViewer>
            </materialDesign:Card>
        </Grid>

        <!-- Status Bar -->
        <Border Grid.Row="2" 
               Background="{DynamicResource MaterialDesignDivider}" 
               Padding="10,5">
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="Auto"/>
                </Grid.ColumnDefinitions>

                <TextBlock x:Name="StatusBarText" 
                          Text="Ready for detection" 
                          VerticalAlignment="Center"/>

                <StackPanel Grid.Column="1" Orientation="Horizontal">
                    <TextBlock Text="Audio Guidance: " VerticalAlignment="Center"/>
                    <TextBlock x:Name="AudioGuidanceStatusText" 
                              Text="Off" 
                              FontWeight="Bold"
                              VerticalAlignment="Center"
                              Margin="5,0,0,0"/>
                </StackPanel>
            </Grid>
        </Border>
    </Grid>
</Window>

